# ðŸ§¾ Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Cursor Ñ MT5 Ñ‡ÐµÑ€ÐµÐ· Flask ÑÐµÑ€Ð²ÐµÑ€

## ðŸ“‹ ÐžÐ±Ð·Ð¾Ñ€

Ð”Ð°Ð½Ð½Ð°Ñ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Cursor (Ð½Ð° macOS) Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ðµ Ð¾Ñ€Ð´ÐµÑ€Ð° Ð² MetaTrader 5 (Ð½Ð° Windows VM) Ñ‡ÐµÑ€ÐµÐ· Flask ÑÐµÑ€Ð²ÐµÑ€.

## ðŸ—ï¸ ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

```
Cursor (macOS) â†â†’ Flask Server (Windows VM) â†â†’ MetaTrader 5
```

### ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹:
- **`cursor_send_order_improved.py`** - ÐšÐ»Ð¸ÐµÐ½Ñ‚ÑÐºÐ°Ñ Ñ‡Ð°ÑÑ‚ÑŒ Ð½Ð° macOS
- **`mt5_server.py`** - Flask ÑÐµÑ€Ð²ÐµÑ€ Ð½Ð° Windows VM
- **`trading_functions.py`** - Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð»Ð¸

## ðŸš€ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°

### 1. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Windows VM

#### Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹:
```bash
pip install flask MetaTrader5 requests
```

#### Ð—Ð°Ð¿ÑƒÑÐº Flask ÑÐµÑ€Ð²ÐµÑ€Ð°:
```bash
python mt5_server.py
```

Ð¡ÐµÑ€Ð²ÐµÑ€ Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ: `http://0.0.0.0:5000`

### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° macOS (Cursor)

#### ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ IP Ð°Ð´Ñ€ÐµÑÐ°:
Ð’ Ñ„Ð°Ð¹Ð»Ðµ `utils/cursor_send_order_improved.py` Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ IP Ð°Ð´Ñ€ÐµÑ Ð½Ð° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ IP Ð²Ð°ÑˆÐµÐ¹ Windows VM:

```python
MT5_SERVER_CONFIG = {
    'base_url': 'http://10.211.55.3:5000',  # Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð²Ð°Ñˆ IP
    'timeout': 10,
    'retry_attempts': 3,
    'retry_delay': 1
}
```

#### Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ:
```bash
python utils/trading_functions.py
```

## ðŸ“Š Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

### Ð‘Ð°Ð·Ð¾Ð²Ð¾Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

```python
from utils.trading_functions import place_trade

# ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð³Ð¾ Ð¾Ñ€Ð´ÐµÑ€Ð°
result = place_trade("EURUSD", 0.1, "buy")
if result['success']:
    print("âœ… ÐžÑ€Ð´ÐµÑ€ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾")
else:
    print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ°: {result['error']}")
```

### ÐŸÑ€Ð¾Ð´Ð²Ð¸Ð½ÑƒÑ‚Ð¾Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

```python
from utils.trading_functions import place_trade, place_multiple_trades

# ÐžÑ€Ð´ÐµÑ€ Ñ SL/TP
result = place_trade(
    symbol="XAUUSD",
    volume=0.1,
    order_type="buy",
    sl=1950.0,
    tp=2000.0,
    comment="Gold trade"
)

# ÐŸÐ°ÐºÐµÑ‚Ð½Ð°Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð¾Ñ€Ð´ÐµÑ€Ð¾Ð²
trades = [
    {'symbol': 'EURUSD', 'volume': 0.1, 'order_type': 'buy', 'sl': 1.2000, 'tp': 1.2100},
    {'symbol': 'GBPUSD', 'volume': 0.05, 'order_type': 'sell', 'sl': 1.3000, 'tp': 1.2900}
]

batch_result = place_multiple_trades(trades)
```

### Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ð² Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ð¹ Ð±Ð¾Ñ‚

```python
from utils.trading_functions import place_trade
from services.signal_processor import SignalProcessor

class TradingBot:
    def __init__(self):
        self.signal_processor = SignalProcessor()
    
    def process_signal(self, signal_data):
        """ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð¾Ð³Ð¾ ÑÐ¸Ð³Ð½Ð°Ð»Ð°"""
        symbol = signal_data['symbol']
        direction = signal_data['direction']
        volume = signal_data['volume']
        
        # ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ Ñ‚Ð¸Ð¿ Ð¾Ñ€Ð´ÐµÑ€Ð°
        order_type = "buy" if direction == "LONG" else "sell"
        
        # ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð¾Ñ€Ð´ÐµÑ€
        result = place_trade(symbol, volume, order_type)
        
        if result['success']:
            print(f"âœ… Ð¡Ð¸Ð³Ð½Ð°Ð» Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½: {symbol} {direction}")
            return result
        else:
            print(f"âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ ÑÐ¸Ð³Ð½Ð°Ð»Ð°: {result['error']}")
            return None
```

## ðŸ”§ API Endpoints

### Flask ÑÐµÑ€Ð²ÐµÑ€ (Windows VM)

| Endpoint | ÐœÐµÑ‚Ð¾Ð´ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ |
|----------|-------|----------|
| `/health` | GET | ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ ÑÐµÑ€Ð²ÐµÑ€Ð° |
| `/send_order` | POST | ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð¾Ñ€Ð´ÐµÑ€Ð° |
| `/account_info` | GET | Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾Ð± Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ðµ |
| `/positions` | GET | ÐžÑ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ |
| `/close_position` | POST | Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ |
| `/modify_position` | POST | ÐœÐ¾Ð´Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ SL/TP |

### ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²

#### ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð¾Ñ€Ð´ÐµÑ€Ð°:
```bash
curl -X POST http://10.211.55.3:5000/send_order \
  -H "Content-Type: application/json" \
  -d '{
    "symbol": "EURUSD",
    "volume": 0.1,
    "order_type": "buy",
    "sl": 1.2000,
    "tp": 1.2100,
    "comment": "Test order"
  }'
```

#### ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð¾Ð± Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ðµ:
```bash
curl http://10.211.55.3:5000/account_info
```

## âš ï¸ ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº

### Ð¢Ð¸Ð¿Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð¸ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ:

1. **"ÐÐµÑ‚ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº MT5 ÑÐµÑ€Ð²ÐµÑ€Ñƒ"**
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ Flask ÑÐµÑ€Ð²ÐµÑ€ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð½Ð° Windows VM
   - Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ IP Ð°Ð´Ñ€ÐµÑ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÐµÑ‚ÐµÐ²Ñ‹Ðµ Ð¿Ð¾Ñ€Ñ‚Ñ‹ (5000)

2. **"MT5 Ð½Ðµ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½"**
   - Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ MetaTrader 5 Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð½Ð° Windows VM
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Flask ÑÐµÑ€Ð²ÐµÑ€Ð°

3. **"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ ÑÐ¸Ð¼Ð²Ð¾Ð»"**
   - Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð² MT5
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°

## ðŸ”’ Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ

### Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸:

1. **Ð¡ÐµÑ‚ÐµÐ²Ð°Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ:**
   - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ VPN Ð´Ð»Ñ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð¼ÐµÐ¶Ð´Ñƒ macOS Ð¸ Windows VM
   - ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÑŒÑ‚Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð¿Ð¾Ñ€Ñ‚Ñƒ 5000 Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ IP macOS

2. **ÐÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ:**
   - Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ API ÐºÐ»ÑŽÑ‡Ð¸ Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹ Flask ÑÐµÑ€Ð²ÐµÑ€Ð°
   - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ HTTPS Ð´Ð»Ñ ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‚Ñ€Ð°Ñ„Ð¸ÐºÐ°

3. **Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ:**
   - Ð’ÑÐµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð»Ð¾Ð³Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐ¹Ñ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð½Ð° Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚ Ð¿Ð¾Ð´Ð¾Ð·Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸

## ðŸ“ˆ ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ°:

```python
from utils.trading_functions import test_mt5_connection, get_trading_status

# Ð¢ÐµÑÑ‚ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ
connection_status = test_mt5_connection()
print(f"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ: {connection_status}")

# ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
trading_status = get_trading_status()
print(f"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹: {trading_status}")
```

### Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ:

Ð’ÑÐµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð»Ð¾Ð³Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ Ñ ÑƒÑ€Ð¾Ð²Ð½ÐµÐ¼ INFO. Ð›Ð¾Ð³Ð¸ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚:
- Ð’Ñ€ÐµÐ¼Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸
- ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¾Ñ€Ð´ÐµÑ€Ð°
- Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ
- ÐžÑˆÐ¸Ð±ÐºÐ¸ Ð¸ Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ñ

## ðŸš€ ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ

### Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ð¼Ð¸ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸ÑÐ¼Ð¸:

```python
import time
from utils.trading_functions import place_trade

class AutomatedTrader:
    def __init__(self):
        self.is_running = False
    
    def start_trading(self):
        """Ð—Ð°Ð¿ÑƒÑÐº Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð»Ð¸"""
        self.is_running = True
        while self.is_running:
            # Ð’Ð°ÑˆÐ° Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° Ð·Ð´ÐµÑÑŒ
            if self.should_buy():
                place_trade("EURUSD", 0.1, "buy")
            elif self.should_sell():
                place_trade("EURUSD", 0.1, "sell")
            
            time.sleep(60)  # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ°Ð¶Ð´ÑƒÑŽ Ð¼Ð¸Ð½ÑƒÑ‚Ñƒ
    
    def should_buy(self):
        # Ð’Ð°ÑˆÐ° Ð»Ð¾Ð³Ð¸ÐºÐ° Ð´Ð»Ñ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ¸
        pass
    
    def should_sell(self):
        # Ð’Ð°ÑˆÐ° Ð»Ð¾Ð³Ð¸ÐºÐ° Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸
        pass
```

## ðŸ“ ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ

### 1. ÐŸÑ€Ð¾ÑÑ‚Ð°Ñ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð°Ñ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ

```python
def simple_strategy():
    """ÐŸÑ€Ð¾ÑÑ‚Ð°Ñ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ: Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ° Ð¿Ñ€Ð¸ Ñ€Ð¾ÑÑ‚Ðµ, Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð° Ð¿Ñ€Ð¸ Ð¿Ð°Ð´ÐµÐ½Ð¸Ð¸"""
    from utils.trading_functions import place_trade
    
    # ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ðµ Ñ†ÐµÐ½Ñ‹ (Ð²Ð°ÑˆÐ° Ð»Ð¾Ð³Ð¸ÐºÐ°)
    current_price = get_current_price("EURUSD")
    
    if current_price > previous_price:
        place_trade("EURUSD", 0.1, "buy", comment="Trend following")
    elif current_price < previous_price:
        place_trade("EURUSD", 0.1, "sell", comment="Trend following")
```

### 2. Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ€Ð¸ÑÐºÐ°Ð¼Ð¸

```python
def risk_managed_trade(symbol, direction, risk_percent=2.0):
    """Ð¢Ð¾Ñ€Ð³Ð¾Ð²Ð»Ñ Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼ Ñ€Ð¸ÑÐºÐ°Ð¼Ð¸"""
    from utils.trading_functions import place_trade, get_account_info
    
    # ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾Ð± Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ðµ
    account_info = get_account_info()
    if not account_info['success']:
        return {'success': False, 'error': 'ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾Ð± Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ðµ'}
    
    balance = account_info['balance']
    risk_amount = balance * (risk_percent / 100)
    
    # Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð¾Ð±ÑŠÐµÐ¼ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ (ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð¾)
    volume = risk_amount / 1000  # ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ñ‹Ð¹ Ñ€Ð°ÑÑ‡ÐµÑ‚
    
    # ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð¾Ñ€Ð´ÐµÑ€
    return place_trade(symbol, volume, direction)
```

## ðŸ”§ Ð£ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½ÐµÐ¿Ð¾Ð»Ð°Ð´Ð¾Ðº

### Ð§Ð°ÑÑ‚Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹:

1. **Ð¡ÐµÑ€Ð²ÐµÑ€ Ð½Ðµ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚:**
   ```bash
   # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ ÑÐµÑ€Ð²ÐµÑ€Ð°
   curl http://10.211.55.3:5000/health
   ```

2. **ÐžÑˆÐ¸Ð±ÐºÐ¸ MT5:**
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Flask ÑÐµÑ€Ð²ÐµÑ€Ð°
   - Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ MT5 Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð¸ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ð½

3. **Ð¡ÐµÑ‚ÐµÐ²Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹:**
   ```bash
   # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ð¾Ñ€Ñ‚Ð°
   telnet 10.211.55.3 5000
   ```

## ðŸ“ž ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

ÐŸÑ€Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ½Ð¾Ð²ÐµÐ½Ð¸Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼:

1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Flask ÑÐµÑ€Ð²ÐµÑ€Ð°
2. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ IP Ð°Ð´Ñ€ÐµÑÐ¾Ð²
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÐµÑ‚ÐµÐ²Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
4. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ MT5 Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

---

**Ð’Ð°Ð¶Ð½Ð¾:** Ð’ÑÐµÐ³Ð´Ð° Ñ‚ÐµÑÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð½Ð° Ð´ÐµÐ¼Ð¾-ÑÑ‡ÐµÑ‚Ðµ Ð¿ÐµÑ€ÐµÐ´ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð½Ð° Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ ÑÑ‡ÐµÑ‚Ðµ! 